<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>SHWARMAGO POS ‚Äì Enterprise</title>

<script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>

<style>
:root{
 --primary:#ff6b00;
 --dark:#222;
 --light:#f4f6f8;
 --white:#fff;
 --border:#e0e0e0;
 --shadow:0 4px 12px rgba(0,0,0,.08);
}

*{box-sizing:border-box;font-family:Calibri,Segoe UI,sans-serif}

body{
 margin:0;
 height:100vh;
 display:flex;
 background:var(--light);
 color:#333;
}

/* ===== SIDEBAR ===== */
.sidebar{
 width:240px;
 background:#fff;
 border-right:1px solid var(--border);
 padding:20px;
 display:flex;
 flex-direction:column;
}
.brand{
 font-size:22px;
 font-weight:700;
 color:var(--primary);
 margin-bottom:30px;
}
.nav{
 padding:12px 14px;
 border-radius:8px;
 cursor:pointer;
 margin-bottom:8px;
 font-weight:600;
 color:#666;
}
.nav.active,.nav:hover{
 background:var(--primary);
 color:#fff;
}

/* ===== MAIN ===== */
.main{flex:1;display:flex;flex-direction:column}

/* TOP BAR */
.topbar{
 background:#fff;
 padding:12px 20px;
 display:flex;
 justify-content:space-between;
 border-bottom:1px solid var(--border);
 font-weight:600;
}

/* VIEW */
.view{display:none;flex:1;padding:20px;overflow:auto}
.view.active{display:block}

/* ===== POS ===== */
.pos-layout{display:flex;gap:20px;height:100%}

/* MENU */
.menu-section{flex:1}
.cat-bar{display:flex;gap:10px;margin-bottom:15px}
.cat-btn{
 padding:8px 14px;
 border-radius:20px;
 border:1px solid var(--border);
 cursor:pointer;
 background:#fff;
 font-weight:600;
}
.cat-btn.active{
 background:var(--primary);
 color:#fff;
 border-color:var(--primary);
}

.menu-grid{
 display:grid;
 grid-template-columns:repeat(auto-fill,minmax(150px,1fr));
 gap:15px;
}
.card{
 background:#fff;
 padding:15px;
 border-radius:10px;
 border:1px solid var(--border);
 cursor:pointer;
 transition:.2s;
}
.card:hover{transform:translateY(-3px);box-shadow:var(--shadow)}
.price{color:var(--primary);font-weight:700;font-size:18px}

/* BILL */
.bill{
 width:360px;
 background:#fff;
 border-radius:10px;
 border:1px solid var(--border);
 display:flex;
 flex-direction:column;
}
.bill-head{
 padding:15px;
 border-bottom:1px solid var(--border);
}
.bill-body{flex:1;overflow:auto;padding:15px}
.bill-row{
 display:flex;
 justify-content:space-between;
 margin-bottom:10px;
 border-bottom:1px dashed #eee;
 padding-bottom:8px;
}
.qty button{
 border:none;
 padding:4px 8px;
 cursor:pointer;
}
.bill-foot{
 padding:15px;
 border-top:1px solid var(--border);
}
.total-line{
 display:flex;
 justify-content:space-between;
 margin-bottom:8px;
 font-weight:600;
}
.btn{
 width:100%;
 padding:14px;
 background:var(--primary);
 border:none;
 color:#fff;
 font-size:16px;
 border-radius:8px;
 cursor:pointer;
}

/* ===== DASHBOARD ===== */
.kpis{
 display:grid;
 grid-template-columns:repeat(3,1fr);
 gap:20px;
}
.kpi{
 background:#fff;
 padding:20px;
 border-radius:10px;
 box-shadow:var(--shadow);
}
.kpi h3{margin:0;font-size:14px;color:#888}
.kpi p{font-size:28px;font-weight:700;margin:8px 0 0}

/* ===== TABLE ===== */
table{
 width:100%;
 border-collapse:collapse;
 background:#fff;
 margin-top:20px;
 box-shadow:var(--shadow);
}
th,td{
 padding:12px;
 border-bottom:1px solid #eee;
 text-align:left;
}
th{background:#fafafa}

/* ===== MODAL ===== */
.modal{
 position:fixed;
 inset:0;
 background:rgba(0,0,0,.5);
 display:none;
 align-items:center;
 justify-content:center;
}
.modal-box{
 background:#fff;
 padding:30px;
 border-radius:10px;
 width:350px;
 text-align:center;
}

/* ===== PRINT ===== */
@media print{
 body *{visibility:hidden}
 .print-area,.print-area *{visibility:visible}
 .print-area{position:absolute;left:0;top:0;width:100%}
}
</style>
</head>

<body>

<div class="sidebar">
 <div class="brand">üåØ SHWARMAGO</div>
 <div class="nav active" onclick="showView('pos',this)">Billing POS</div>
 <div class="nav" onclick="showView('dash',this)">Dashboard</div>
</div>

<div class="main">

<div class="topbar">
 <div>üìç Hata Outlet</div>
 <div>üïí <span id="clock"></span></div>
</div>

<!-- ================= POS ================= -->
<div id="pos" class="view active">
 <div class="pos-layout">

  <div class="menu-section">
   <div class="cat-bar" id="catBar"></div>
   <div class="menu-grid" id="menuGrid"></div>
  </div>

  <div class="bill">
   <div class="bill-head">
    <b>Order #<span id="orderId"></span></b><br>
    <small id="bizDate"></small>
   </div>

   <div class="bill-body" id="cartBox"></div>

   <div class="bill-foot">
    <div class="total-line"><span>Subtotal</span><span>‚Çπ<span id="sub"></span></span></div>
    <div class="total-line"><span>Tax (5%)</span><span>‚Çπ<span id="tax"></span></span></div>
    <div class="total-line"><span><b>Total</b></span><span><b>‚Çπ<span id="total"></span></b></span></div>
    <button class="btn" onclick="pay()">Checkout</button>
   </div>
  </div>

 </div>
</div>

<!-- ================= DASHBOARD ================= -->
<div id="dash" class="view">
 <div class="kpis">
  <div class="kpi"><h3>Revenue</h3><p>‚Çπ<span id="rev"></span></p></div>
  <div class="kpi"><h3>Orders</h3><p id="ord"></p></div>
  <div class="kpi"><h3>Avg Order</h3><p>‚Çπ<span id="avg"></span></p></div>
 </div>

 <table>
  <thead>
   <tr><th>ID</th><th>Time</th><th>Amount</th><th>Mode</th></tr>
  </thead>
  <tbody id="salesTbl"></tbody>
 </table>
</div>

</div>

<!-- ================= PAYMENT MODAL ================= -->
<div class="modal" id="payModal">
 <div class="modal-box print-area">
  <h2>Pay ‚Çπ<span id="payAmt"></span></h2>
  <button class="btn" style="background:#4caf50" onclick="finish('CASH')">Cash</button>
  <button class="btn" onclick="showQR()">UPI</button>
  <div id="qr"></div>
  <button onclick="closePay()">Cancel</button>
 </div>
</div>

<script>
/* ===== CLOCK ===== */
setInterval(()=>clock.innerText=new Date().toLocaleTimeString(),1000);

/* ===== DATA ===== */
const TAX=5;
let menu=[
 {name:"Small Shawarma",price:49,cat:"Shawarma"},
 {name:"Medium Shawarma",price:69,cat:"Shawarma"},
 {name:"Large Shawarma",price:99,cat:"Shawarma"},
 {name:"Cola",price:40,cat:"Drinks"}
];

let sales=JSON.parse(localStorage.getItem("sales")||"[]");
let cart=[];
let orderNo=sales.length+1001;
let bizDate=new Date().toDateString();

/* ===== INIT ===== */
orderId.innerText=orderNo;
bizDate.innerText=bizDate;

/* ===== MENU ===== */
function loadMenu(cat){
 menuGrid.innerHTML="";
 menu.filter(m=>!cat||m.cat===cat).forEach(m=>{
  menuGrid.innerHTML+=`
  <div class="card" onclick='add("${m.name}",${m.price})'>
   <b>${m.name}</b>
   <div class="price">‚Çπ${m.price}</div>
  </div>`;
 });
}

function loadCats(){
 let cats=[...new Set(menu.map(m=>m.cat))];
 catBar.innerHTML="";
 cats.forEach((c,i)=>{
  catBar.innerHTML+=`<div class="cat-btn ${i==0?"active":""}" onclick="selCat('${c}',this)">${c}</div>`;
 });
 loadMenu(cats[0]);
}

function selCat(c,el){
 document.querySelectorAll(".cat-btn").forEach(x=>x.classList.remove("active"));
 el.classList.add("active");
 loadMenu(c);
}

/* ===== CART ===== */
function add(n,p){
 let f=cart.find(i=>i.name==n);
 f?f.qty++:cart.push({name:n,price:p,qty:1});
 renderCart();
}

function renderCart(){
 cartBox.innerHTML="";
 let sub=0;
 cart.forEach((i,idx)=>{
  sub+=i.price*i.qty;
  cartBox.innerHTML+=`
   <div class="bill-row">
    ${i.qty}x ${i.name}
    <span>‚Çπ${i.price*i.qty}</span>
   </div>`;
 });
 let tax=sub*TAX/100;
 sub.innerText=sub;
 tax.innerText=tax.toFixed(2);
 total.innerText=(sub+tax).toFixed(2);
}

/* ===== PAYMENT ===== */
function pay(){
 if(!cart.length)return alert("Cart empty");
 payAmt.innerText=total.innerText;
 payModal.style.display="flex";
}

function showQR(){
 qr.innerHTML="";
 new QRCode(qr,{
  text:`upi://pay?pa=8003270534@PTSBI&am=${payAmt.innerText}`,
  width:150,height:150
 });
}

function finish(mode){
 sales.unshift({id:orderNo,time:new Date().toLocaleTimeString(),amt:payAmt.innerText,mode});
 localStorage.setItem("sales",JSON.stringify(sales));
 cart=[];orderNo++;orderId.innerText=orderNo;
 closePay();renderCart();updateDash();
 alert("Order Completed");
}

function closePay(){payModal.style.display="none";qr.innerHTML=""}

/* ===== DASH ===== */
function updateDash(){
 let r=sales.reduce((a,b)=>a+Number(b.amt),0);
 rev.innerText=r;
 ord.innerText=sales.length;
 avg.innerText=sales.length?(r/sales.length).toFixed(0):0;
 salesTbl.innerHTML="";
 sales.slice(0,10).forEach(s=>{
  salesTbl.innerHTML+=`<tr><td>#${s.id}</td><td>${s.time}</td><td>‚Çπ${s.amt}</td><td>${s.mode}</td></tr>`;
 });
}

/* ===== NAV ===== */
function showView(v,el){
 document.querySelectorAll(".view").forEach(x=>x.classList.remove("active"));
 document.getElementById(v).classList.add("active");
 document.querySelectorAll(".nav").forEach(x=>x.classList.remove("active"));
 el.classList.add("active");
}

/* ===== START ===== */
loadCats();
updateDash();
</script>
</body>
</html>

