<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SHWARMAGO | ULTIMATE</title>
    <link href="https://fonts.googleapis.com/css2?family=Black+Ops+One&family=Rajdhani:wght@500;700&family=Share+Tech+Mono&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-deep: #050b14;
            --bg-panel: #0f1623;
            --neon-orange: #ff3c00;
            --neon-blue: #00f3ff;
            --neon-green: #00ff9d;
            --glass: rgba(15, 22, 35, 0.85);
            --border: 1px solid rgba(0, 243, 255, 0.2);
        }

        * { box-sizing: border-box; user-select: none; scrollbar-width: thin; }
        
        body {
            font-family: 'Rajdhani', sans-serif;
            background-color: var(--bg-deep);
            background-image: 
                radial-gradient(circle at 10% 20%, rgba(255, 60, 0, 0.1) 0%, transparent 20%),
                radial-gradient(circle at 90% 80%, rgba(0, 243, 255, 0.1) 0%, transparent 20%);
            color: white;
            margin: 0;
            height: 100vh;
            overflow: hidden;
            display: flex;
        }

        /* --- SIDEBAR NAV --- */
        .sidebar {
            width: 80px;
            background: var(--bg-panel);
            border-right: var(--border);
            display: flex;
            flex-direction: column;
            align-items: center;
            padding-top: 20px;
            z-index: 20;
        }

        .nav-btn {
            width: 50px; height: 50px;
            margin-bottom: 20px;
            border-radius: 12px;
            border: 1px solid #333;
            background: #1a2130;
            color: #666;
            font-size: 1.5rem;
            display: flex; justify-content: center; align-items: center;
            cursor: pointer;
            transition: 0.3s;
        }
        .nav-btn.active, .nav-btn:hover {
            background: var(--neon-orange);
            color: white;
            box-shadow: 0 0 15px var(--neon-orange);
            border-color: white;
        }

        /* --- MAIN CONTENT AREA --- */
        .main-stage {
            flex: 1;
            position: relative;
            display: flex;
            overflow: hidden;
        }

        /* --- POS VIEW --- */
        .pos-container {
            display: flex;
            width: 100%;
            height: 100%;
            transition: transform 0.4s ease;
        }

        .menu-grid {
            flex: 3;
            padding: 30px;
            overflow-y: auto;
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            grid-auto-rows: min-content;
            gap: 20px;
        }

        .hero-title {
            grid-column: 1 / -1;
            font-family: 'Black Ops One', cursive;
            font-size: 3rem;
            margin-bottom: 20px;
            text-transform: uppercase;
            background: linear-gradient(90deg, var(--neon-orange), var(--neon-blue));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-shadow: 0 0 20px rgba(255, 60, 0, 0.4);
            letter-spacing: 2px;
        }

        /* CARDS */
        .card {
            background: linear-gradient(160deg, #1a2230 0%, #0f1623 100%);
            border: var(--border);
            border-radius: 16px;
            padding: 20px;
            text-align: center;
            cursor: pointer;
            position: relative;
            overflow: hidden;
            transition: all 0.2s;
        }
        
        .card::before {
            content: ''; position: absolute; top:0; left:0; width:100%; height:4px;
            background: var(--neon-blue); opacity: 0; transition: 0.3s;
        }
        
        .card:hover { transform: translateY(-5px); box-shadow: 0 10px 30px rgba(0,0,0,0.5); border-color: var(--neon-blue); }
        .card:hover::before { opacity: 1; }
        .card:active { transform: scale(0.95); }

        .card-emoji { font-size: 3rem; display: block; margin-bottom: 10px; filter: drop-shadow(0 0 10px rgba(255,255,255,0.2)); }
        .card-name { font-weight: 700; font-size: 1.2rem; display: block; letter-spacing: 1px; }
        .card-price { color: var(--neon-orange); font-size: 1.5rem; font-family: 'Share Tech Mono'; margin-top: 5px; display: block; }
        .size-badge { position: absolute; top: 10px; right: 10px; font-size: 0.7rem; background: #333; padding: 2px 6px; border-radius: 4px; text-transform: uppercase;}

        /* --- CART HUD --- */
        .cart-hud {
            flex: 1.2;
            background: rgba(10, 15, 25, 0.95);
            border-left: var(--border);
            backdrop-filter: blur(10px);
            display: flex;
            flex-direction: column;
            min-width: 380px;
            padding: 20px;
            box-shadow: -10px 0 30px rgba(0,0,0,0.5);
        }

        .hud-header {
            display: flex; justify-content: space-between; align-items: flex-end;
            border-bottom: 2px solid #222; padding-bottom: 15px; margin-bottom: 15px;
        }

        .cart-items { flex: 1; overflow-y: auto; padding-right: 5px; }
        
        .cart-row {
            display: flex; justify-content: space-between; align-items: center;
            background: #161d2b; padding: 12px; border-radius: 8px; margin-bottom: 8px;
            border-left: 3px solid var(--neon-orange);
            animation: slideIn 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }
        @keyframes slideIn { from { transform: translateX(50px); opacity:0; } to { transform: translateX(0); opacity:1; } }

        .qty-controls { display: flex; align-items: center; gap: 10px; background: #0f1623; padding: 2px 8px; border-radius: 4px; }
        .qty-btn { cursor: pointer; color: var(--neon-blue); font-weight: bold; }
        .qty-btn:hover { color: white; }

        .total-section {
            background: #161d2b; border-radius: 12px; padding: 20px; margin-top: 20px;
            border: 1px solid var(--neon-orange);
            box-shadow: 0 0 20px rgba(255, 60, 0, 0.1);
        }

        .checkout-btn {
            width: 100%;
            background: linear-gradient(90deg, var(--neon-orange), #ff0055);
            border: none; padding: 15px; border-radius: 8px;
            color: white; font-family: 'Black Ops One'; font-size: 1.5rem; letter-spacing: 2px;
            cursor: pointer; margin-top: 15px;
            transition: 0.3s;
            text-shadow: 0 2px 0 rgba(0,0,0,0.3);
        }
        .checkout-btn:hover { filter: brightness(1.2); transform: scale(1.02); box-shadow: 0 0 20px var(--neon-orange); }

        /* --- DASHBOARD VIEW (Hidden by default) --- */
        .dashboard-view {
            position: absolute; top:0; left:0; width: 100%; height: 100%;
            background: var(--bg-deep);
            padding: 40px;
            display: none; /* Toggled */
            overflow-y: auto;
            z-index: 10;
        }

        .stats-deck { display: flex; gap: 20px; margin-bottom: 30px; }
        .stat-card {
            flex: 1; background: #161d2b; padding: 20px; border-radius: 12px;
            border-top: 4px solid var(--neon-blue);
        }
        .stat-num { font-size: 3rem; font-family: 'Share Tech Mono'; color: white; }
        .stat-label { color: #888; text-transform: uppercase; letter-spacing: 1px; font-size: 0.9rem; }

        /* VISUAL CHART CSS */
        .chart-container {
            background: #161d2b; padding: 20px; border-radius: 12px; height: 300px;
            display: flex; align-items: flex-end; justify-content: space-around;
            margin-bottom: 30px; border: 1px solid #333;
        }
        .bar-group { display: flex; flex-direction: column; align-items: center; width: 10%; height: 100%; justify-content: flex-end; }
        .bar { width: 100%; background: linear-gradient(to top, var(--neon-blue), transparent); border-top: 3px solid var(--neon-blue); transition: height 1s; min-height: 2px; border-radius: 4px 4px 0 0; opacity: 0.7; }
        .bar:hover { opacity: 1; background: var(--neon-blue); }
        .bar-label { margin-top: 10px; font-size: 0.8rem; color: #666; }

        /* --- MODALS --- */
        .modal-overlay {
            position: fixed; top:0; left:0; width:100%; height:100%;
            background: rgba(0,0,0,0.8); z-index: 100;
            display: none; align-items: center; justify-content: center;
            backdrop-filter: blur(8px);
        }
        .modal-box {
            background: #1a2130; border: 1px solid var(--neon-green);
            padding: 30px; border-radius: 16px; width: 400px;
            text-align: center;
            box-shadow: 0 0 50px rgba(0, 255, 157, 0.2);
            animation: popIn 0.3s;
        }
        @keyframes popIn { from { transform: scale(0.8); opacity:0; } to { transform: scale(1); opacity:1; } }

        /* RECEIPT STYLE */
        .receipt {
            font-family: 'Share Tech Mono', monospace;
            background: #fff; color: #000;
            padding: 20px; margin: 0 auto;
            width: 300px; text-align: left;
            box-shadow: 0 0 20px rgba(0,0,0,0.5);
            transform: rotate(-1deg);
        }
        .receipt-line { border-bottom: 1px dashed #000; margin: 10px 0; }
        .receipt-row { display: flex; justify-content: space-between; margin-bottom: 5px; }
        
        .pay-btn {
            width: 100%; padding: 15px; margin-top: 10px;
            border: none; border-radius: 8px; font-weight: bold; font-size: 1.1rem; cursor: pointer;
            display: flex; justify-content: center; align-items: center; gap: 10px;
        }
        .pay-cash { background: #2ecc71; color: #000; }
        .pay-upi { background: #3498db; color: white; }

        .hidden { display: none !important; }
    </style>
</head>
<body>

    <div class="sidebar">
        <div class="nav-btn active" onclick="switchView('pos')" title="Point of Sale">üçî</div>
        <div class="nav-btn" onclick="switchView('dashboard')" title="Manager Dashboard">üìä</div>
    </div>

    <div class="main-stage">
        
        <div id="view-pos" class="pos-container">
            
            <div class="menu-grid">
                <div class="hero-title">üî• SHWARMAGO</div>
                
                <div class="card" onclick="addToCart('Small Shawarma', 49)">
                    <span class="size-badge">S</span>
                    <span class="card-emoji">üåØ</span>
                    <span class="card-name">SMALL ROLL</span>
                    <span class="card-price">‚Çπ49</span>
                </div>
                <div class="card" onclick="addToCart('Medium Shawarma', 69)">
                    <span class="size-badge">M</span>
                    <span class="card-emoji">üåØ</span>
                    <span class="card-name">MEDIUM ROLL</span>
                    <span class="card-price">‚Çπ69</span>
                </div>
                <div class="card" style="border-color: var(--neon-orange); box-shadow: inset 0 0 20px rgba(255, 60, 0, 0.2);" onclick="addToCart('Large Shawarma', 99)">
                    <span class="size-badge">L</span>
                    <span class="card-emoji">üåØ</span>
                    <span class="card-name">LARGE BEAST</span>
                    <span class="card-price">‚Çπ99</span>
                </div>

                <div class="card" onclick="addToCart('Only Chicken', 120)">
                    <span class="card-emoji">üçó</span>
                    <span class="card-name">MEAT BOX</span>
                    <span class="card-price">‚Çπ120</span>
                </div>
                <div class="card" onclick="addToCart('Peri Peri Fries', 80)">
                    <span class="card-emoji">üçü</span>
                    <span class="card-name">PERI FRIES</span>
                    <span class="card-price">‚Çπ80</span>
                </div>
                <div class="card" onclick="addToCart('Extra Cheese', 20)">
                    <span class="card-emoji">üßÄ</span>
                    <span class="card-name">CHEESE DIP</span>
                    <span class="card-price">‚Çπ20</span>
                </div>
                <div class="card" onclick="addToCart('Cola', 40)">
                    <span class="card-emoji">ü•§</span>
                    <span class="card-name">COLA</span>
                    <span class="card-price">‚Çπ40</span>
                </div>
                <div class="card" onclick="addToCart('Water', 20)">
                    <span class="card-emoji">üíß</span>
                    <span class="card-name">WATER</span>
                    <span class="card-price">‚Çπ20</span>
                </div>
            </div>

            <div class="cart-hud">
                <div class="hud-header">
                    <div>
                        <div style="font-size:0.8rem; color:#888;">ORDER ID</div>
                        <div style="font-family: 'Share Tech Mono'; font-size:1.5rem; color:var(--neon-blue);">#<span id="dispOrderId">1001</span></div>
                    </div>
                    <button onclick="clearCart()" style="background:none; border:none; color:#ff4444; cursor:pointer;">CLEAR</button>
                </div>

                <div class="cart-items" id="cartContainer">
                    <div style="text-align:center; margin-top:50px; color:#444;">SELECT ITEMS</div>
                </div>

                <div class="total-section">
                    <div style="display:flex; justify-content:space-between; margin-bottom:10px; color:#aaa; font-size:0.9rem;">
                        <span>Subtotal</span>
                        <span>‚Çπ<span id="valSubtotal">0</span></span>
                    </div>
                    <div style="display:flex; justify-content:space-between; margin-bottom:10px; font-size:2rem; font-family:'Share Tech Mono'; color:var(--neon-orange);">
                        <span>TOTAL</span>
                        <span>‚Çπ<span id="valTotal">0</span></span>
                    </div>
                    <button class="checkout-btn" onclick="openPaymentModal()">PROCEED TO PAY</button>
                </div>
            </div>
        </div>

        <div id="view-dashboard" class="dashboard-view">
            <h1 class="hero-title" style="font-size: 2rem;">üìä MANAGER COCKPIT</h1>
            
            <div class="stats-deck">
                <div class="stat-card">
                    <div class="stat-label">Total Revenue</div>
                    <div class="stat-num" style="color:var(--neon-green)">‚Çπ<span id="dashRevenue">0</span></div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">Orders Today</div>
                    <div class="stat-num" style="color:var(--neon-blue)"><span id="dashOrders">0</span></div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">Best Seller</div>
                    <div class="stat-num" style="font-size:1.5rem; color:var(--neon-orange)" id="dashBest">None</div>
                </div>
            </div>

            <h3 style="color:#888; margin-bottom:15px;">HOURLY TRAFFIC (LIVE)</h3>
            <div class="chart-container">
                <div class="bar-group"><div class="bar" style="height: 20%;"></div><span class="bar-label">12PM</span></div>
                <div class="bar-group"><div class="bar" style="height: 45%;"></div><span class="bar-label">1PM</span></div>
                <div class="bar-group"><div class="bar" style="height: 80%;"></div><span class="bar-label">2PM</span></div>
                <div class="bar-group"><div class="bar" style="height: 30%;"></div><span class="bar-label">3PM</span></div>
                <div class="bar-group"><div class="bar" style="height: 10%;"></div><span class="bar-label">4PM</span></div>
                <div class="bar-group"><div class="bar" style="height: 60%; background:var(--neon-orange);"></div><span class="bar-label">NOW</span></div>
            </div>

            <h3 style="color:#888; margin-bottom:15px;">RECENT INVOICES</h3>
            <table style="width:100%; text-align:left; border-collapse:collapse; color:#ddd;">
                <thead style="background:#222; color:var(--neon-blue);">
                    <tr><th style="padding:10px;">ID</th><th>Time</th><th>Total</th><th>Method</th></tr>
                </thead>
                <tbody id="dashHistoryBody"></tbody>
            </table>
        </div>

    </div>

    <div id="modalPayment" class="modal-overlay">
        <div class="modal-box">
            <h2 style="font-family:'Black Ops One'; margin-top:0;">SELECT PAYMENT</h2>
            <div style="font-size:2rem; margin-bottom:20px; color:var(--neon-orange);">‚Çπ<span id="payAmount">0</span></div>
            <button class="pay-btn pay-cash" onclick="finalizeOrder('CASH')">üíµ CASH</button>
            <button class="pay-btn pay-upi" onclick="finalizeOrder('UPI')">üì± UPI / SCAN</button>
            <button class="pay-btn" style="background:#333; color:#fff;" onclick="closeModals()">CANCEL</button>
        </div>
    </div>

    <div id="modalReceipt" class="modal-overlay">
        <div style="text-align:center;">
            <div class="receipt" id="receiptContent">
                </div>
            <button onclick="closeModals()" style="margin-top:20px; padding:10px 30px; background:var(--neon-blue); border:none; border-radius:20px; font-weight:bold; cursor:pointer;">PRINT & CLOSE</button>
        </div>
    </div>

<script>
    // --- DATA ---
    let cart = [];
    let salesLog = [];
    let orderId = 1001;
    let totalRevenue = 0;
    
    // --- DOM ---
    const ui = {
        cart: document.getElementById('cartContainer'),
        total: document.getElementById('valTotal'),
        subtotal: document.getElementById('valSubtotal'),
        orderId: document.getElementById('dispOrderId'),
        payAmount: document.getElementById('payAmount'),
        dashRev: document.getElementById('dashRevenue'),
        dashOrd: document.getElementById('dashOrders'),
        dashTable: document.getElementById('dashHistoryBody')
    };

    // --- POS LOGIC ---
    function addToCart(name, price) {
        let existing = cart.find(x => x.name === name);
        if(existing) existing.qty++;
        else cart.push({name, price, qty:1});
        renderCart();
    }

    function updateQty(name, delta) {
        let item = cart.find(x => x.name === name);
        if(item) {
            item.qty += delta;
            if(item.qty <= 0) cart = cart.filter(x => x.name !== name);
            renderCart();
        }
    }

    function clearCart() {
        cart = [];
        renderCart();
    }

    function renderCart() {
        ui.cart.innerHTML = '';
        let total = 0;
        
        if(cart.length === 0) {
            ui.cart.innerHTML = '<div style="text-align:center; margin-top:50px; color:#444;">SELECT ITEMS</div>';
        }

        cart.forEach(item => {
            total += (item.price * item.qty);
            ui.cart.innerHTML += `
                <div class="cart-row">
                    <div>
                        <div style="font-weight:bold; font-size:1.1rem;">${item.name}</div>
                        <div style="color:#888; font-size:0.8rem;">‚Çπ${item.price}</div>
                    </div>
                    <div class="qty-controls">
                        <div class="qty-btn" onclick="updateQty('${item.name}', -1)">-</div>
                        <span style="padding:0 10px;">${item.qty}</span>
                        <div class="qty-btn" onclick="updateQty('${item.name}', 1)">+</div>
                    </div>
                </div>
            `;
        });

        ui.subtotal.innerText = total;
        ui.total.innerText = total;
        ui.payAmount.innerText = total;
    }

    // --- CHECKOUT LOGIC ---
    function openPaymentModal() {
        if(cart.length === 0) return alert("Cart is empty!");
        document.getElementById('modalPayment').style.display = 'flex';
    }

    function finalizeOrder(method) {
        let total = parseInt(ui.total.innerText);
        let date = new Date();
        let timeStr = date.toLocaleTimeString();

        // 1. Save Sale
        salesLog.unshift({ id: orderId, time: timeStr, total: total, method: method, items: [...cart] });
        totalRevenue += total;

        // 2. Generate Receipt
        generateReceiptHTML(orderId, timeStr, total, method);

        // 3. Update Dashboard Stats
        ui.dashRev.innerText = totalRevenue;
        ui.dashOrd.innerText = salesLog.length;
        updateDashTable();

        // 4. Reset
        orderId++;
        ui.orderId.innerText = orderId;
        cart = [];
        renderCart();

        // 5. Show Receipt Modal
        document.getElementById('modalPayment').style.display = 'none';
        document.getElementById('modalReceipt').style.display = 'flex';
    }

    function generateReceiptHTML(id, time, total, method) {
        let html = `
            <div style="text-align:center; font-weight:bold; font-size:1.2rem; margin-bottom:5px;">SHWARMAGO</div>
            <div style="text-align:center; font-size:0.8rem;">MUMBAI BRANCH #1</div>
            <div class="receipt-line"></div>
            <div class="receipt-row"><span>Ord: #${id}</span><span>${time}</span></div>
            <div class="receipt-line"></div>
        `;
        
        salesLog[0].items.forEach(i => {
            html += `<div class="receipt-row"><span>${i.qty} ${i.name}</span><span>${i.qty * i.price}</span></div>`;
        });

        html += `
            <div class="receipt-line"></div>
            <div class="receipt-row" style="font-weight:bold; font-size:1.2rem;"><span>TOTAL</span><span>‚Çπ${total}</span></div>
            <div class="receipt-row" style="font-size:0.8rem;"><span>Paid via:</span><span>${method}</span></div>
            <div class="receipt-line"></div>
            <div style="text-align:center; margin-top:10px;">*** THANK YOU ***</div>
        `;

        document.getElementById('receiptContent').innerHTML = html;
    }

    function updateDashTable() {
        let html = '';
        salesLog.slice(0, 5).forEach(s => {
            html += `
                <tr style="border-bottom:1px solid #333;">
                    <td style="padding:10px; color:var(--neon-orange);">#${s.id}</td>
                    <td>${s.time}</td>
                    <td style="font-weight:bold;">‚Çπ${s.total}</td>
                    <td><span style="background:#333; padding:2px 6px; border-radius:4px; font-size:0.8rem;">${s.method}</span></td>
                </tr>
            `;
        });
        ui.dashTable.innerHTML = html;
        
        // Simple Best Seller Logic
        let counts = {};
        salesLog.forEach(s => s.items.forEach(i => counts[i.name] = (counts[i.name] || 0) + i.qty));
        let best = Object.keys(counts).reduce((a, b) => counts[a] > counts[b] ? a : b, "None");
        document.getElementById('dashBest').innerText = best;
    }

    // --- NAVIGATION ---
    function switchView(viewName) {
        document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('active'));
        event.currentTarget.classList.add('active');

        if(viewName === 'pos') {
            document.getElementById('view-pos').style.display = 'flex';
            document.getElementById('view-dashboard').style.display = 'none';
        } else {
            document.getElementById('view-pos').style.display = 'none';
            document.getElementById('view-dashboard').style.display = 'block';
        }
    }

    function closeModals() {
        document.querySelectorAll('.modal-overlay').forEach(m => m.style.display = 'none');
    }

</script>
</body>
</html>
